import{z as w,A as b,R as l,al as m,J as u,L as ne,B as R,O as y,Q as x,a6 as k,I as L,P as ue,ax as se,ay as re,E as ae,au as ie}from"./vue-Do6POmbF.js";import{E as de,i as ce}from"./element-plus-BTjFwWIN.js";import{a as T}from"./axios-NIGUFBhG.js";import{Q as me}from"./@element-plus-icons-Cy6YoBun.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function i(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(t){if(t.ep)return;t.ep=!0;const r=i(t);fetch(t.href,r)}})();const fe={name:"App"},D=(o,e)=>{const i=o.__vccOpts||o;for(const[s,t]of e)i[s]=t;return i},pe={id:"app"};function be(o,e,i,s,t,r){const a=m("router-view");return b(),w("div",pe,[l(a)])}const ge=D(fe,[["render",be]]),he="https://github.com/LM-Firefly/sub-web",O="https://raw.githubusercontent.com/LM-Firefly/Rules/master/Subconverter-base/MultiSub-NoReject.toml",ye="https://github.com/LM-Firefly/Firefly-sub",Se="https://github.com/LM-Firefly/Rules",j="https://sub.koyeb.app/sub?",N="https://t.me/subconverter_discuss",Ce="https://github.com/LM-Firefly/subconverter/blob/main/README-cn.md#%E8%BF%9B%E9%98%B6%E9%93%BE%E6%8E%A5",ve={data(){const o=/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),e={clientTypes:{Clash:"clash",Surge:"surge&ver=4",Surge3:"surge&ver=3",Quantumult:"quan",QuantumultX:"quanx",Singbox:"singbox",Loon:"loon",Surfboard:"surfboard","Shadowsocks(SIP002)":"ss","Shadowsocks(SIP008)":"sssub",Mellow:"mellow",ShadowsocksR:"ssr",ShadowsocksD:"ssd",Surge2:"surge&ver=2",V2Ray:"v2ray",Trojan:"trojan","混合订阅(mixed)":"mixed",自动判断客户端:"auto"},customBackend:{"localhost:25500/sub? 本地版":"http://localhost:25500/sub?","fly-sub.fly.dev/sub?":"https://fly-sub.fly.dev/sub?","sub.koyeb.app/sub?":"https://sub.koyeb.app/sub?","zsub.zeabur.app/sub?":"https://zsub.zeabur.app/sub?","render-sub.onrender.com/sub?":"https://render-sub.onrender.com/sub?","flysub.firefly-lm.workers.dev/sub?":"https://flysub.firefly-lm.workers.dev/sub?","sub.firefly-lm.workers.dev/sub?":"https://sub.firefly-lm.workers.dev/sub?","rensub.firefly-lm.workers.dev/sub?":"https://rensub.firefly-lm.workers.dev/sub?"},clashdns:{"默认不开启TUN/TAP":"",tap:"tap","win-tun":"win-tun","linux-tun":"linux-tun","meta-tun":"meta-tun"},remoteConfig:[{label:"默认",options:[{label:"默认不选, 使用后端默认pref配置",value:""}]},{label:"LM-Firefly (Online, 与Github 同步)",options:[{label:"MultiSub-NoReject",value:"https://raw.githubusercontent.com/LM-Firefly/Rules/master/Subconverter-base/MultiSub-NoReject.toml"},{label:"AllSub-NoReject",value:"https://raw.githubusercontent.com/LM-Firefly/Rules/master/Subconverter-base/AllSub-NoReject.toml"},{label:"MultiSub-AdBlock",value:"https://raw.githubusercontent.com/LM-Firefly/Rules/master/Subconverter-base/MultiSub-AdBlock.toml"},{label:"AllSub-AdBlock",value:"https://raw.githubusercontent.com/LM-Firefly/Rules/master/Subconverter-base/AllSub-AdBlock.toml"},{label:"AIO",value:"https://raw.githubusercontent.com/LM-Firefly/Rules/master/Subconverter-base/AIO.toml"},{label:"AIO-NoReject",value:"https://raw.githubusercontent.com/LM-Firefly/Rules/master/Subconverter-base/AIO-NoReject.toml"},{label:"CordCloud",value:"https://raw.githubusercontent.com/LM-Firefly/Rules/master/Subconverter-base/CordCloud.toml"},{label:"CordCloud-NoReject",value:"https://raw.githubusercontent.com/LM-Firefly/Rules/master/Subconverter-base/CordCloud-NoReject.toml"}]},{label:"ACL4SSR (Online, 与Github 同步)",options:[{label:"ACL4SSR 默认版 分组比较全",value:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online.ini"},{label:"ACL4SSR 更多去广告",value:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_AdblockPlus.ini"},{label:"ACL4SSR 全分组 自动测速、故障转移、负载均衡",value:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Full_MultiMode.ini"},{label:"ACL4SSR 全分组 重度用户使用",value:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Full.ini"},{label:"ACL4SSR 全分组 重度用户使用 更多去广告",value:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Full_AdblockPlus.ini"},{label:"ACL4SSR 全分组 重度用户使用 奈飞全量",value:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Full_Netflix.ini"},{label:"ACL4SSR 全分组 无自动测速 重度用户使用",value:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Full_NoAuto.ini"},{label:"ACL4SSR 精简版",value:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini.ini"},{label:"ACL4SSR 精简版 带港美日国家",value:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini_MultiCountry.ini"},{label:"ACL4SSR 精简版 更多去广告",value:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini_AdblockPlus.ini"},{label:"ACL4SSR 精简版 带故障转移",value:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini_Fallback.ini"},{label:"ACL4SSR 精简版 自动测速、故障转移、负载均衡",value:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini_MultiMode.ini"},{label:"ACL4SSR 精简版 不带自动测速",value:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini_NoAuto.ini"},{label:"ACL4SSR 无自动测速",value:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_NoAuto.ini"},{label:"ACL4SSR 无广告拦截规则",value:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_NoReject.ini"}]},{label:"Special",options:[{label:"NeteaseUnblock(仅规则, No-Urltest)",value:"https://raw.githubusercontent.com/SleepyHeeead/subconverter-config/master/remote-config/special/netease.ini"},{label:"Basic(仅GEOIP CN + Final)",value:"https://raw.githubusercontent.com/SleepyHeeead/subconverter-config/master/remote-config/special/basic.ini"}]}]};if(o){e.remoteConfig[1].options.forEach(s=>{s.label.length>10&&(s.label=s.label.replace(/\s.*/,""))});const i={};Object.keys(e.customBackend).forEach(s=>{i[s.replace(/\(.*/,"")]=e.customBackend[s]}),e.customBackend=i}return{backendVersion:"",advanced:"1",isPC:!0,options:e,extrasetVisible:!1,ruleVisible:!1,form:{appendType:!1,clashdns:"",classic:!1,clientType:"",customBackend:"",emoji:!0,excludeRemarks:"",expand:!0,tls13:!1,fdn:!1,filename:"",devid:"",includeRemarks:"",insert:!1,new_name:!0,nodeList:!1,remoteConfig:"",scv:!1,sort:!1,sourceSubUrl:"",tfo:!1,udp:!1,xudp:!1},customParams:[],loading:!1,customSubUrl:"",loadConfig:"",dialogLoadConfigVisible:!1,myBot:N,sampleConfig:O,subDocAdvanced:Ce}},created(){document.title="Firefly-SubConverter",this.isPC=this.$getOS().isPc,this.form.sourceSubUrl=this.getLocalStorageItem("sourceSubUrl")},mounted(){Object.assign(this.form,{clientType:"clash",customBackend:j,remoteConfig:"",clashdns:""}),this.notify(),this.getBackendVersion()},watch:{"form.classic"(o){o&&(this.form.expand=!1)},"form.nodeList"(o){o&&(this.form.expand=!1)},"form.customBackend":"getBackendVersion"},methods:{goToProject:()=>window.open(he),gotoTgChannel:()=>window.open(N),gotoGayhub:()=>window.open(ye),gotoGayhubRuleset:()=>window.open(Se),gotoRemoteConfig:()=>window.open(O),addCustomParam(){this.customParams.push({name:"",value:""})},removeCustomParam(o){this.customParams.splice(o,1)},buildUrlParams(){const{form:o,advanced:e,customParams:i}=this,s=o.customBackend||j,t=new URLSearchParams;if(t.append("target",o.clientType),t.append("url",o.sourceSubUrl.replace(/(\n|\r|\n\r)/g,"|")),o.remoteConfig&&t.append("config",o.remoteConfig),e==="2"){const r={insert:o.insert,expand:o.nodeList?void 0:o.expand,classic:o.classic&&!o.nodeList&&!o.expand?!0:void 0,exclude:o.excludeRemarks,include:o.includeRemarks,filename:o.filename,dev_id:o.devid,append_type:o.appendType,tfo:o.tfo,tls13:o.tls13,scv:o.scv,udp:o.udp,xudp:o.xudp,sort:o.sort,emoji:o.emoji,list:o.nodeList,fdn:o.fdn,new_name:o.clientType==="clash"&&o.new_name?!0:void 0},a=["append_type","insert","tfo","tls13","scv","udp","xudp","sort","emoji","list","fdn","new_name"];Object.entries(r).forEach(([d,c])=>{if(c!=null)if(typeof c=="boolean"){if(c===!1&&a.includes(d))return;t.append(d,c?"true":"false")}else c&&t.append(d,c)}),o.clientType==="clash"&&o.clashdns&&t.append("clash.dns",o.clashdns),i.forEach(({name:d,value:c})=>{d&&c&&t.append(d,c)})}return{backend:s,queryParams:t.toString()}},validateRequiredFields(){return!this.form.sourceSubUrl||!this.form.clientType?(this.$message.error("订阅链接与客户端为必填项"),!1):!0},makeUrl(){if(!this.validateRequiredFields())return!1;const{backend:o,queryParams:e}=this.buildUrlParams();this.customSubUrl=`${o}${e}`,this.copyToClipboard(this.customSubUrl),this.$message.success("定制订阅已复制到剪贴板")},notify(){de({title:"隐私提示",type:"warning",message:"各种订阅链接生成纯前端实现, 无隐私问题。默认提供后端转换服务, 隐私担忧者请自行搭建后端服务。",customClass:"custom-notify",position:"top-right",duration:2e3,showClose:!0})},handleError(o,e="操作失败"){return console.error(o),this.$message.error(o.response?.data?.message||o.message||e),!1},async analyzeUrl(){if(this.loadConfig.includes("target"))return this.loadConfig;this.loading=!0;try{return(await fetch(this.loadConfig,{method:"GET",redirect:"follow"})).url}catch(o){throw this.handleError(o,"解析短链接失败, 请检查短链接服务端是否配置跨域"),o}finally{this.loading=!1}},confirmLoadConfig(){if(!this.loadConfig.trim())return this.$message.error("订阅链接不能为空"),!1;(async()=>{try{const o=new URL(await this.analyzeUrl());this.form.customBackend=o.origin+o.pathname+"?";const e=new URLSearchParams(o.search),i=new Set,s=a=>(i.add(a),e.get(a)),t=s("target");this.form.clientType=t==="surge"?t+"&ver="+(s("ver")||"4"):t,Object.entries({url:{key:"sourceSubUrl",processor:a=>decodeURIComponent(a).replace(/\|/g,`
`)},insert:{key:"insert"},config:{key:"remoteConfig"},exclude:{key:"excludeRemarks"},include:{key:"includeRemarks"},filename:{key:"filename"},dev_id:{key:"devid"},append_type:{key:"appendType"},tfo:{key:"tfo"},tls13:{key:"tls13"},scv:{key:"scv"},udp:{key:"udp"},xudp:{key:"xudp"},sort:{key:"sort"},emoji:{key:"emoji"},list:{key:"nodeList"},"clash.dns":{key:"clashdns"},new_name:{key:"new_name"},fdn:{key:"fdn"},expand:{key:"expand"},classic:{key:"classic"}}).forEach(([a,{key:d,processor:c}])=>{const f=s(a);f!==null&&(c?this.form[d]=c(f):typeof this.form[d]=="boolean"?this.form[d]=f==="true"||f==="1":this.form[d]=f)}),this.customParams=Array.from(e.entries()).filter(([a])=>!i.has(a)&&a!=="append_type"&&a!=="list").map(([a,d])=>({name:a,value:d})),this.dialogLoadConfigVisible=!1,this.$message.success("长/短链接已成功解析为订阅信息")}catch{this.$message.error("请输入正确的订阅地址!")}})()},renderPost(){const{form:o}=this,e=new FormData;return Object.entries({clientType:"target",sourceSubUrl:"url",insert:"insert",remoteConfig:"config",excludeRemarks:"exclude",includeRemarks:"include",filename:"filename",devid:"dev_id",appendType:"append_type",tfo:"tfo",tls13:"tls13",scv:"scv",udp:"udp",xudp:"xudp",sort:"sort",emoji:"emoji",nodeList:"list",clashdns:"clash.dns",new_name:"newname",fdn:"fdn",expand:"expand",classic:"classic"}).forEach(([s,t])=>{e.append(t,encodeURIComponent(o[s].toString()))}),e},async getBackendVersion(){try{const o=`${this.form.customBackend.substring(0,this.form.customBackend.length-5)}/version`,{data:e}=await this.$axios.get(o);this.backendVersion=e.replace(/backend\n$/gm,"").replace("subconverter","")}catch{this.$alert('<span style="color: orange;">获取后端版本信息失败, 当前后端不可用！</span>',"提示",{type:"error",dangerouslyUseHTMLString:!0})}},saveSubUrl(){this.form.sourceSubUrl&&this.setLocalStorageItem("sourceSubUrl",this.form.sourceSubUrl)},getLocalStorageItem(o){const e=+new Date,i=localStorage.getItem(o);if(!i)return"";const s=JSON.parse(i);return s.expire>e?s.value:(localStorage.removeItem(o),"")},setLocalStorageItem(o,e){const i=parseInt("86400"),s=+new Date;localStorage.setItem(o,JSON.stringify({setTime:s,ttl:i,expire:s+i*1e3,value:e}))},filterRemoteConfig(o){return o?this.options.remoteConfig.map(e=>({...e,options:e.options.filter(i=>i.label.toLowerCase().includes(o.toLowerCase()))})):this.options.remoteConfig},openLoadConfigDialog(){this.dialogLoadConfigVisible=!0},copyToClipboard(o){if(!o)return this.$message.error("没有可复制的内容");if(navigator.clipboard)navigator.clipboard.writeText(o).then(()=>this.$message.success("已复制到剪贴板")).catch(()=>this.$message.error("复制失败, 请手动复制"));else{const e=document.createElement("textarea");e.value=o,e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("copy"),this.$message.success("已复制到剪贴板")}catch{this.$message.error("复制失败, 请手动复制")}document.body.removeChild(e)}},clashInstall(){if(!this.validateRequiredFields(["customSubUrl"],"请先填写必填项, 生成订阅链接"))return!1;window.open("clash://install-config?url="+encodeURIComponent(this.customShortSubUrl&&this.customShortSubUrl!==""?this.customShortSubUrl:this.customSubUrl))},surgeInstall(){if(!this.validateRequiredFields(["customSubUrl"],"请先填写必填项, 生成订阅链接"))return!1;window.open("surge://install-config?url="+this.customSubUrl)}}},Ee={style:{"font-style":"normal","font-size":"80%","text-align":"right","margin-top":"5px"}},we={key:0},_e={style:{"margin-top":"20px",display:"flex","justify-content":"center"}};function xe(o,e,i,s,t,r){const a=m("svg-icon"),d=m("el-radio"),c=m("el-form-item"),f=m("el-input"),C=m("el-option"),p=m("el-select"),v=m("InfoFilled"),g=m("el-icon"),A=m("el-link"),G=m("el-option-group"),z=m("Delete"),E=m("el-button"),S=m("el-checkbox"),_=m("el-row"),q=m("Operation"),F=m("el-popover"),W=m("Setting"),H=m("Expand"),Q=m("Plus"),J=m("el-button-group"),X=m("MagicStick"),Y=m("el-divider"),K=m("DocumentCopy"),Z=m("Document"),$=m("DocumentChecked"),P=m("el-col"),ee=m("Link"),M=m("el-form"),te=m("el-container"),le=m("el-card"),oe=m("el-dialog");return b(),w("div",null,[l(_,{style:{"margin-top":"10px"}},{default:u(()=>[l(P,null,{default:u(()=>[l(le,null,{header:u(()=>[e[33]||(e[33]=R("span",{class:"brand-name"},"Firefly-SubConverter",-1)),l(a,{"icon-class":"github",style:{"margin-left":"20px"},onClick:r.goToProject},null,8,["onClick"]),l(a,{"icon-class":"telegram",style:{"margin-left":"20px"},onClick:r.gotoTgChannel},null,8,["onClick"]),l(a,{"icon-class":"clash",style:{"margin-left":"20px"},onClick:r.gotoGayhubRuleset},null,8,["onClick"]),R("div",Ee,ue(t.backendVersion),1)]),default:u(()=>[l(te,null,{default:u(()=>[l(M,{model:t.form,"label-width":"90px","label-position":"left",style:{width:"100%","align-content":"center"},class:"sub-form"},{default:u(()=>[l(c,{label:"模式设置:"},{default:u(()=>[l(d,{modelValue:t.advanced,"onUpdate:modelValue":e[0]||(e[0]=n=>t.advanced=n),label:"1"},{default:u(()=>[...e[34]||(e[34]=[y("基础模式",-1)])]),_:1},8,["modelValue"]),l(d,{modelValue:t.advanced,"onUpdate:modelValue":e[1]||(e[1]=n=>t.advanced=n),label:"2"},{default:u(()=>[...e[35]||(e[35]=[y("进阶模式",-1)])]),_:1},8,["modelValue"])]),_:1}),l(c,{label:"订阅链接:"},{default:u(()=>[l(f,{modelValue:t.form.sourceSubUrl,"onUpdate:modelValue":e[2]||(e[2]=n=>t.form.sourceSubUrl=n),style:{width:"100%"},type:"textarea",rows:4,placeholder:"支持各种订阅链接或单节点链接, 多个链接每行一个或用 | 分隔",onBlur:r.saveSubUrl},null,8,["modelValue","onBlur"])]),_:1}),l(c,{label:"客户端项:"},{default:u(()=>[l(p,{modelValue:t.form.clientType,"onUpdate:modelValue":e[3]||(e[3]=n=>t.form.clientType=n),style:{width:"100%"}},{default:u(()=>[(b(!0),w(x,null,k(t.options.clientTypes,(n,h)=>(b(),L(C,{key:h,label:h,value:n},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(c,{label:"远程配置:"},{default:u(()=>[l(p,{modelValue:t.form.remoteConfig,"onUpdate:modelValue":e[4]||(e[4]=n=>t.form.remoteConfig=n),style:{width:"100%"},"allow-create":"",filterable:"",placeholder:"默认不选, 使用后端默认pref配置"},{default:u(()=>[l(A,{slot:"append",onClick:r.gotoRemoteConfig,style:{"margin-left":"20px"}},{default:u(()=>[l(g,null,{default:u(()=>[l(v)]),_:1}),e[36]||(e[36]=y("远程配置示例",-1))]),_:1},8,["onClick"]),(b(!0),w(x,null,k(t.options.remoteConfig,n=>(b(),L(G,{"label-position":"left",style:{width:"100%"},key:n.label,label:n.label},{default:u(()=>[(b(!0),w(x,null,k(n.options,h=>(b(),L(C,{key:h.value,label:h.label,value:h.value},null,8,["label","value"]))),128))]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(c,{label:"后端地址:"},{default:u(()=>[l(p,{modelValue:t.form.customBackend,"onUpdate:modelValue":e[5]||(e[5]=n=>t.form.customBackend=n),style:{width:"100%"},"allow-create":"",filterable:""},{default:u(()=>[l(A,{slot:"append",onClick:r.gotoGayhub,style:{"margin-left":"20px"}},{default:u(()=>[l(g,null,{default:u(()=>[l(v)]),_:1}),e[37]||(e[37]=y("Docker快速部署Demo, 前往项目仓库",-1))]),_:1},8,["onClick"]),(b(!0),w(x,null,k(t.options.customBackend,(n,h)=>(b(),L(C,{key:h,label:h,value:n},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t.advanced==="2"?(b(),w("div",we,[l(c,{label:"包含节点:"},{default:u(()=>[l(f,{modelValue:t.form.includeRemarks,"onUpdate:modelValue":e[6]||(e[6]=n=>t.form.includeRemarks=n),style:{width:"100%"},placeholder:"包含有关键字的节点, 支持正则"},null,8,["modelValue"])]),_:1}),l(c,{label:"排除节点:"},{default:u(()=>[l(f,{modelValue:t.form.excludeRemarks,"onUpdate:modelValue":e[7]||(e[7]=n=>t.form.excludeRemarks=n),style:{width:"100%"},placeholder:"不包含有关键字的节点, 支持正则"},null,8,["modelValue"])]),_:1}),l(c,{label:"输出文件名:"},{default:u(()=>[l(f,{modelValue:t.form.filename,"onUpdate:modelValue":e[8]||(e[8]=n=>t.form.filename=n),style:{width:"100%"},placeholder:"返回的订阅文件名"},null,8,["modelValue"])]),_:1}),l(c,{label:"Clash.TUN:"},{default:u(()=>[l(p,{modelValue:t.form.clashdns,"onUpdate:modelValue":e[9]||(e[9]=n=>t.form.clashdns=n),style:{width:"100%"},"allow-create":"",filterable:"",placeholder:"默认不开启TUN/TAP"},{default:u(()=>[(b(!0),w(x,null,k(t.options.clashdns,(n,h)=>(b(),L(C,{key:h,label:h,value:n},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(c,{label:"远程设备:"},{default:u(()=>[l(f,{modelValue:t.form.devid,"onUpdate:modelValue":e[10]||(e[10]=n=>t.form.devid=n),placeholder:"用于设置QuantumultX的远程设备ID"},null,8,["modelValue"])]),_:1}),(b(!0),w(x,null,k(t.customParams,(n,h)=>(b(),L(c,{key:h,style:{display:"flex","align-items":"left","margin-bottom":"10px"}},{default:u(()=>[l(f,{modelValue:n.name,"onUpdate:modelValue":V=>n.name=V,placeholder:"自定义参数名",style:{width:"100px","margin-left":"-90px","margin-right":"5px"}},null,8,["modelValue","onUpdate:modelValue"]),e[38]||(e[38]=R("span",{style:{"margin-right":"5px"}},":",-1)),l(f,{modelValue:n.value,"onUpdate:modelValue":V=>n.value=V,placeholder:"自定义参数内容",style:{flex:"1","margin-right":"5px"}},null,8,["modelValue","onUpdate:modelValue"]),l(E,{onClick:V=>r.removeCustomParam(h)},{default:u(()=>[l(g,null,{default:u(()=>[l(z)]),_:1})]),_:1},8,["onClick"])]),_:2},1024))),128)),l(c,{style:{width:"100%","text-align":"center"},"label-width":"0px"},{default:u(()=>[l(_,{type:"flex",justify:"center"},{default:u(()=>[l(J,null,{default:u(()=>[l(F,{placement:"bottom",modelValue:t.extrasetVisible,"onUpdate:modelValue":e[19]||(e[19]=n=>t.extrasetVisible=n),style:{"text-align":"center","min-width":"600px"}},{reference:u(()=>[l(E,null,{default:u(()=>[l(g,null,{default:u(()=>[l(q)]),_:1}),e[39]||(e[39]=y("全局字段",-1))]),_:1})]),default:u(()=>[l(_,{gutter:10},{default:u(()=>[l(S,{modelValue:t.form.new_name,"onUpdate:modelValue":e[11]||(e[11]=n=>t.form.new_name=n),label:"Clash新字段"},null,8,["modelValue"]),l(S,{modelValue:t.form.emoji,"onUpdate:modelValue":e[12]||(e[12]=n=>t.form.emoji=n),label:"Emoji"},null,8,["modelValue"]),l(S,{modelValue:t.form.appendType,"onUpdate:modelValue":e[13]||(e[13]=n=>t.form.appendType=n),label:"节点类型"},null,8,["modelValue"]),l(S,{modelValue:t.form.sort,"onUpdate:modelValue":e[14]||(e[14]=n=>t.form.sort=n),label:"排序节点"},null,8,["modelValue"]),l(S,{modelValue:t.form.fdn,"onUpdate:modelValue":e[15]||(e[15]=n=>t.form.fdn=n),label:"过滤非法节点"},null,8,["modelValue"]),l(S,{modelValue:t.form.nodeList,"onUpdate:modelValue":e[16]||(e[16]=n=>t.form.nodeList=n),label:"输出为 Node List"},null,8,["modelValue"]),l(S,{modelValue:t.form.tls13,"onUpdate:modelValue":e[17]||(e[17]=n=>t.form.tls13=n),label:"开启TLS_1.3"},null,8,["modelValue"]),l(S,{modelValue:t.form.insert,"onUpdate:modelValue":e[18]||(e[18]=n=>t.form.insert=n),label:"插入默认节点"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),l(F,{placement:"bottom",modelValue:t.extrasetVisible,"onUpdate:modelValue":e[24]||(e[24]=n=>t.extrasetVisible=n),style:{"text-align":"center","min-width":"600px"}},{reference:u(()=>[l(E,null,{default:u(()=>[l(g,null,{default:u(()=>[l(W)]),_:1}),e[40]||(e[40]=y("节点字段",-1))]),_:1})]),default:u(()=>[l(_,{gutter:10},{default:u(()=>[l(S,{modelValue:t.form.udp,"onUpdate:modelValue":e[20]||(e[20]=n=>t.form.udp=n),label:"启用 UDP"},null,8,["modelValue"]),l(S,{modelValue:t.form.tfo,"onUpdate:modelValue":e[21]||(e[21]=n=>t.form.tfo=n),label:"TCP Fast Open"},null,8,["modelValue"]),l(S,{modelValue:t.form.scv,"onUpdate:modelValue":e[22]||(e[22]=n=>t.form.scv=n),label:"Skip Cert Verify"},null,8,["modelValue"]),l(S,{modelValue:t.form.xudp,"onUpdate:modelValue":e[23]||(e[23]=n=>t.form.xudp=n),label:"启用 XUDP"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),l(F,{placement:"bottom",modelValue:t.ruleVisible,"onUpdate:modelValue":e[27]||(e[27]=n=>t.ruleVisible=n),style:{"text-align":"center","min-width":"200px"}},{reference:u(()=>[l(E,null,{default:u(()=>[l(g,null,{default:u(()=>[l(H)]),_:1}),e[41]||(e[41]=y("Rule-Providers",-1))]),_:1})]),default:u(()=>[l(_,{gutter:10},{default:u(()=>[l(S,{modelValue:t.form.expand,"onUpdate:modelValue":e[25]||(e[25]=n=>t.form.expand=n),label:"展开规则"},null,8,["modelValue"])]),_:1}),l(_,{gutter:10},{default:u(()=>[l(S,{modelValue:t.form.classic,"onUpdate:modelValue":e[26]||(e[26]=n=>t.form.classic=n),label:"Classic Rule-Providers",style:{"white-space":"normal"}},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),l(F,{placement:"top-end",title:"添加自定义转换参数",trigger:"hover"},{reference:u(()=>[l(E,{onClick:r.addCustomParam},{default:u(()=>[l(g,null,{default:u(()=>[l(Q)]),_:1})]),_:1},8,["onClick"])]),default:u(()=>[l(A,{type:"primary",href:t.subDocAdvanced,target:"_blank"},{default:u(()=>[l(g,null,{default:u(()=>[l(v)]),_:1}),e[42]||(e[42]=y("参考文档",-1))]),_:1},8,["href"])]),_:1})]),_:1})]),_:1})]),_:1})])):ne("",!0),e[47]||(e[47]=R("div",{style:{"margin-top":"50px"}},null,-1)),l(Y,{"content-position":"center"},{default:u(()=>[l(g,null,{default:u(()=>[l(X)]),_:1})]),_:1}),l(c,{label:"定制订阅:","label-width":"90px","label-position":"left",style:{width:"100%"}},{default:u(()=>[l(f,{class:"copy-content",disabled:"",modelValue:t.customSubUrl,"onUpdate:modelValue":e[29]||(e[29]=n=>t.customSubUrl=n)},{append:u(()=>[l(E,{onClick:e[28]||(e[28]=n=>r.copyToClipboard(t.customSubUrl)),ref:"copy-btn"},{default:u(()=>[l(g,null,{default:u(()=>[l(K)]),_:1}),e[43]||(e[43]=y("复制",-1))]),_:1},512)]),_:1},8,["modelValue"])]),_:1}),R("div",_e,[l(_,{type:"flex",justify:"center"},{default:u(()=>[l(P,{span:24,style:{"text-align":"center"}},{default:u(()=>[l(E,{style:{width:"120px"},type:"danger",onClick:r.makeUrl,disabled:t.form.sourceSubUrl.length===0},{default:u(()=>[l(g,null,{default:u(()=>[l(Z)]),_:1}),e[44]||(e[44]=y("生成订阅链接",-1))]),_:1},8,["onClick","disabled"]),l(E,{style:{width:"120px","margin-left":"10px"},type:"danger",onClick:r.clashInstall,disabled:t.customSubUrl.length===0},{default:u(()=>[l(g,null,{default:u(()=>[l($)]),_:1}),e[45]||(e[45]=y("一键导入Clash",-1))]),_:1},8,["onClick","disabled"])]),_:1}),l(_,null,{default:u(()=>[l(E,{style:{width:"250px","margin-top":"10px"},type:"primary",onClick:r.openLoadConfigDialog,loading:t.loading},{default:u(()=>[l(g,null,{default:u(()=>[l(ee)]),_:1}),e[46]||(e[46]=y("从URL解析",-1))]),_:1},8,["onClick","loading"])]),_:1})]),_:1})])]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})]),_:1}),l(oe,{modelValue:t.dialogLoadConfigVisible,"onUpdate:modelValue":e[32]||(e[32]=n=>t.dialogLoadConfigVisible=n),"show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"80vw",style:{"max-width":"100%"}},{header:u(()=>[...e[48]||(e[48]=[y("可以从老的订阅信息中解析信息,填入页面中去",-1)])]),footer:u(()=>[l(E,{onClick:e[31]||(e[31]=n=>{t.loadConfig="",t.dialogLoadConfigVisible=!1})},{default:u(()=>[...e[49]||(e[49]=[y("取 消",-1)])]),_:1}),l(E,{type:"primary",onClick:r.confirmLoadConfig,disabled:t.loadConfig.length===0},{default:u(()=>[...e[50]||(e[50]=[y("确 定",-1)])]),_:1},8,["onClick","disabled"])]),default:u(()=>[l(M,{"label-position":"left",style:{width:"100%"}},{default:u(()=>[l(c,{prop:"uploadConfig"},{default:u(()=>[l(f,{modelValue:t.loadConfig,"onUpdate:modelValue":e[30]||(e[30]=n=>t.loadConfig=n),type:"textarea",autosize:{minRows:15,maxRows:30},maxlength:"10000","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const ke=D(ve,[["render",xe]]),Le=[{path:"/",name:"SubConverter",component:ke}],Re=se({history:re("/"),routes:Le});/*! Element Plus v2.11.2 */var Ae={name:"zh-cn",el:{breadcrumb:{label:"面包屑"},colorpicker:{confirm:"确定",clear:"清空",defaultLabel:"颜色选择器",description:"当前颜色 {color}，按 Enter 键选择新颜色",alphaLabel:"选择透明度的值"},datepicker:{now:"此刻",today:"今天",cancel:"取消",clear:"清空",confirm:"确定",dateTablePrompt:"使用方向键与 Enter 键可选择日期",monthTablePrompt:"使用方向键与 Enter 键可选择月份",yearTablePrompt:"使用方向键与 Enter 键可选择年份",selectedDate:"已选日期",selectDate:"选择日期",selectTime:"选择时间",startDate:"开始日期",startTime:"开始时间",endDate:"结束日期",endTime:"结束时间",prevYear:"前一年",nextYear:"后一年",prevMonth:"上个月",nextMonth:"下个月",year:"年",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},weeksFull:{sun:"星期日",mon:"星期一",tue:"星期二",wed:"星期三",thu:"星期四",fri:"星期五",sat:"星期六"},months:{jan:"一月",feb:"二月",mar:"三月",apr:"四月",may:"五月",jun:"六月",jul:"七月",aug:"八月",sep:"九月",oct:"十月",nov:"十一月",dec:"十二月"}},inputNumber:{decrease:"减少数值",increase:"增加数值"},select:{loading:"加载中",noMatch:"无匹配数据",noData:"无数据",placeholder:"请选择"},dropdown:{toggleDropdown:"切换下拉选项"},mention:{loading:"加载中"},cascader:{noMatch:"无匹配数据",loading:"加载中",placeholder:"请选择",noData:"暂无数据"},pagination:{goto:"前往",pagesize:"条/页",total:"共 {total} 条",pageClassifier:"页",page:"页",prev:"上一页",next:"下一页",currentPage:"第 {pager} 页",prevPages:"向前 {pager} 页",nextPages:"向后 {pager} 页",deprecationWarning:"你使用了一些已被废弃的用法，请参考 el-pagination 的官方文档"},dialog:{close:"关闭此对话框"},drawer:{close:"关闭此对话框"},messagebox:{title:"提示",confirm:"确定",cancel:"取消",error:"输入的数据不合法!",close:"关闭此对话框"},upload:{deleteTip:"按 Delete 键可删除",delete:"删除",preview:"查看图片",continue:"继续上传"},slider:{defaultLabel:"滑块介于 {min} 至 {max}",defaultRangeStartLabel:"选择起始值",defaultRangeEndLabel:"选择结束值"},table:{emptyText:"暂无数据",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"},tour:{next:"下一步",previous:"上一步",finish:"结束导览",close:"关闭此对话框"},tree:{emptyText:"暂无数据"},transfer:{noMatch:"无匹配数据",noData:"无数据",titles:["列表 1","列表 2"],filterPlaceholder:"请输入搜索内容",noCheckedFormat:"共 {total} 项",hasCheckedFormat:"已选 {checked}/{total} 项"},image:{error:"加载失败"},pageHeader:{title:"返回"},popconfirm:{confirmButtonText:"确定",cancelButtonText:"取消"},carousel:{leftArrow:"上一张幻灯片",rightArrow:"下一张幻灯片",indicator:"幻灯片切换至索引 {index}"}}};const Fe={name:"SvgIcon",props:{iconClass:{type:String,required:!0},className:{type:String,default:""}},computed:{iconName(){return`#icon-${this.iconClass}`},svgClass(){return this.className?"svg-icon "+this.className:"svg-icon"}}},Ve=["xlink:href"];function Be(o,e,i,s,t,r){return b(),w("svg",{class:ae(r.svgClass),"aria-hidden":"true"},[R("use",{"xlink:href":r.iconName},null,8,Ve)],2)}const De=D(Fe,[["render",Be],["__scopeId","data-v-2ba84e0a"]]);typeof window<"u"&&(function(){const o=function(){const e=document.body;if(!document.getElementById("__svg__icons__dom__")){const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.style.position="absolute",s.style.width="0",s.style.height="0",s.id="__svg__icons__dom__",s.setAttribute("xmlns","http://www.w3.org/2000/svg"),s.setAttribute("xmlns:link","http://www.w3.org/1999/xlink"),s.setAttribute("aria-hidden",!0),s.innerHTML='<symbol xmlns:bx="https://boxy-svg.com" viewBox="0 0 512 512" id="icon-clash"><defs><linearGradient id="icon-clash_a" x1="274.573" x2="274.573" y1="82.283" y2="419.547" gradientTransform="translate(19.528 3.318)"><stop offset="0" style="stop-color:#265186"></stop><stop offset="1" style="stop-color:#1a2d4d"></stop></linearGradient></defs><path bx:origin="0.538 0.527" d="M155.481 393.511c2.625-49.912 34.764-276.391 44.547-290.2 8.334-11.764 32.257 34.403 42.081 49.641 32.244-9.337 72.152-6.604 98.396 1.848 6.152-12.97 24.977-64.678 35.98-59.489 12.209 5.758 56.835 312.644 51.824 322.232.989 10.099-272.096 10.042-277.803 1.574l-.083-1.485c-10.532 1.049-56.036-.169-66.638-40.237-11.763-56.273 49.869-71.856 47.82-57.74-1.798 12.386-36.329 16.4-26.68 49.501 8.16 24.246 41.964 24.468 50.556 24.355" style="fill:none;stroke-linejoin:round;stroke:#a89eec;stroke-width:4px;stroke-linecap:round;stroke-opacity:.88"></path><path d="M150.684 391.854c1.278-50.502 32.692-299.933 45.595-304.673 14.206-5.219 37.871 41.108 46.319 57.636 32.244-9.337 70.937-8.41 97.181.042 6.152-12.97 28.955-62.587 40.158-57.846 13.605 5.758 56.03 319.775 49.872 329.32-3.689 10.829-273.77 9.785-279.477 1.317l-.083-1.485c-10.532 1.049-56.536.081-67.138-39.987-11.763-56.273 48.262-72.343 49.357-58.121.953 12.386-36.41 14.419-27.68 49.751 7.11 23.787 37.304 24.159 45.896 24.046" style="fill:url(#icon-clash_a)"></path><path d="M291.852 249.332c2.47-.158 4.462 7.203 10.613 7.19 3.601-.008 6.386-2.825 7.951-1.674s-1.84 4.753-7.564 4.912c-5.037.14-11.406-4.781-10.905-6.732.686 1.824-4.695 6.747-9.979 6.846-5.963.112-9.234-2.763-8.401-4.231 1.237-1.729 5.25.831 8.043.671 5.943-.34 7.917-6.833 10.242-6.982M229.517 191.014c-19.81.104-19.806 29.775-.691 29.931 21.789.178 19.73-30.031.691-29.931M353.143 191.263c-21.514-.259-19.84 29.861-.451 29.722 20.143-.144 18.993-29.499.451-29.722" style="fill:#fff"></path></symbol><symbol viewBox="0 0 1024 1024" id="icon-github"><path d="M511.543 14.057C228.914 13.943 0 242.743 0 525.143 0 748.457 143.2 938.286 342.629 1008c26.857 6.743 22.742-12.343 22.742-25.371v-88.572C210.286 912.23 204 809.6 193.6 792.457c-21.029-35.886-70.743-45.028-55.886-62.171 35.315-18.172 71.315 4.571 113.029 66.171 30.171 44.686 89.028 37.143 118.857 29.714 6.514-26.857 20.457-50.857 39.657-69.485C248.571 727.886 181.6 629.829 181.6 513.257c0-56.571 18.629-108.571 55.2-150.514-23.314-69.143 2.171-128.343 5.6-137.143 66.4-5.943 135.429 47.543 140.8 51.771C420.914 267.2 464 261.83 512.229 261.83c48.457 0 91.657 5.6 129.714 15.885 12.914-9.828 76.914-55.771 138.628-50.171 3.315 8.8 28.229 66.628 6.286 134.857 37.029 42.057 55.886 94.514 55.886 151.2 0 116.8-67.429 214.971-228.572 243.314a145.71 145.71 0 0 1 43.543 104v128.572c.915 10.285 0 20.457 17.143 20.457 202.4-68.229 348.114-259.429 348.114-484.686 0-282.514-229.028-511.2-511.428-511.2"></path></symbol><symbol viewBox="0 0 240 240" id="icon-telegram"><defs><linearGradient id="icon-telegram_a" x1=".667" x2=".417" y1=".167" y2=".75"><stop offset="0" stop-color="#37aee2"></stop><stop offset="1" stop-color="#1e96c8"></stop></linearGradient><linearGradient id="icon-telegram_b" x1=".66" x2=".851" y1=".437" y2=".802"><stop offset="0" stop-color="#eff7fc"></stop><stop offset="1" stop-color="#fff"></stop></linearGradient></defs><circle cx="120" cy="120" r="120" fill="url(#icon-telegram_a)"></circle><path fill="#c8daea" d="M98 175c-3.888 0-3.227-1.468-4.568-5.17L82 132.207 170 80"></path><path fill="#a9c9dd" d="M98 175c3 0 4.325-1.372 6-3l16-15.558-19.958-12.035"></path><path fill="url(#icon-telegram_b)" d="m100.04 144.41 48.36 35.729c5.519 3.045 9.501 1.468 10.876-5.123l19.685-92.763c2.015-8.08-3.08-11.746-8.36-9.349l-115.59 44.571c-7.89 3.165-7.843 7.567-1.438 9.528l29.663 9.259 68.673-43.325c3.242-1.966 6.218-.91 3.776 1.258"></path></symbol>',e.insertBefore(s,null)}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",o):o()})();const B={globalProperties:{axios:o=>{T.defaults.timeout=15e3,o.config.globalProperties.$axios=T},device:o=>{o.config.globalProperties.$getOS=()=>{const e=navigator.userAgent,i=/(?:Windows Phone)/.test(e),s=/(?:SymbianOS)/.test(e)||i,t=/(?:Android)/.test(e),r=/(?:Firefox)/.test(e),a=/(?:iPad|PlayBook)/.test(e)||t&&!/(?:Mobile)/.test(e)||r&&/(?:Tablet)/.test(e),d=/(?:iPhone)/.test(e)&&!a;return{isTablet:a,isIPhone:d,isAndroid:t,isPc:!d&&!t&&!s&&!i}}}},vuePlugins:{elementPlus:o=>{o.use(ce,{locale:Ae})}},components:{svgIcon:o=>{o.component("svg-icon",De);for(const[e,i]of Object.entries(me))o.component(e,i)}}},Ue=o=>{Object.values(B.globalProperties).forEach(e=>e(o)),Object.values(B.vuePlugins).forEach(e=>e(o)),Object.values(B.components).forEach(e=>e(o))},Pe="modulepreload",Me=function(o){return"/"+o},I={},Te=function(e,i,s){let t=Promise.resolve();if(i&&i.length>0){let c=function(f){return Promise.all(f.map(C=>Promise.resolve(C).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),d=a?.nonce||a?.getAttribute("nonce");t=c(i.map(f=>{if(f=Me(f),f in I)return;I[f]=!0;const C=f.endsWith(".css"),p=C?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const v=document.createElement("link");if(v.rel=C?"stylesheet":Pe,C||(v.as="script"),v.crossOrigin="",v.href=f,d&&v.setAttribute("nonce",d),document.head.appendChild(v),C)return new Promise((g,A)=>{v.addEventListener("load",g),v.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${f}`)))})}))}function r(a){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=a,window.dispatchEvent(d),!d.defaultPrevented)throw a}return t.then(a=>{for(const d of a||[])d.status==="rejected"&&r(d.reason);return e().catch(r)})};function Oe(o={}){const{immediate:e=!1,onNeedRefresh:i,onOfflineReady:s,onRegistered:t,onRegisteredSW:r,onRegisterError:a}=o;let d,c;const f=async(p=!0)=>{await c};async function C(){if("serviceWorker"in navigator){if(d=await Te(async()=>{const{Workbox:p}=await import("./workbox-window.prod.es5-CwtvwXb3.js");return{Workbox:p}},[]).then(({Workbox:p})=>new p("/sw.js",{scope:"/",type:"classic"})).catch(p=>{a?.(p)}),!d)return;d.addEventListener("activated",p=>{(p.isUpdate||p.isExternal)&&window.location.reload()}),d.addEventListener("installed",p=>{p.isUpdate||s?.()}),d.register({immediate:e}).then(p=>{r?r("/sw.js",p):t?.(p)}).catch(p=>{a?.(p)})}}return c=C(),f}const je=Oe({onNeedRefresh(){confirm("新版本可用，是否立即刷新？")&&je(!0)},onOfflineReady(){console.log("App is ready for offline use."),"Notification"in window&&Notification.permission==="granted"&&new Notification("您处于离线模式",{body:"应用正在使用缓存数据运行",icon:"/icons/icon-192x192.png"})},onRegistered(o){console.log("Service worker has been registered."),setInterval(()=>{o?.update()},3600*1e3)}}),U=ie(ge);U.use(Re);Ue(U);U.mount("#app");
